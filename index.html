<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>TDD - Test Driven Development</title>

		<meta name="description" content="Présentation du TDD en prélude à la mise en place de Coding Dojo">
		<meta name="author" content="Jean-François Le Foll">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h2>TDD - Test Driven Development</h2>
					<p>
						<small> <a href="mailto:jeff.lefoll@outlook.com?subject=Présentation%20TDD">Jean-François Le Foll</a> / <a href="http://twitter.com/JeffLeFoll">@JeffLeFoll</a></small>
					</p>
				</section>

				<section>
					<section>
						<h2>Définition d'un bon test unitaire (James Shore)</h2>
						<p class="fragment">S’exécute rapidement</p>
						<p class="fragment">Fournit une ceinture de sécurité pour le refactoring</p>
						<p class="fragment">Documente le but du code (<b><u>Spécifications par l’exemple</u></b>)</p>
						<p class="fragment">Alerte l'équipe des régressions</p>
					</section>
				</section>

				<section>
					<section>
						<h2>Une règle à suivre : F.I.R.S.T</h2>
						<ul>
							<li>Fast</li>
							<li>Independant</li>
							<li>Repeatable</li>
							<li>Self-validating</li>
							<li>Timely</li>
						</ul>
					</section>

					<section>
						<h3>Rapide</h3>
						<pre><code data-trim contenteditable class="java">
@Test
public void ceciEstUnTestQuiNEstPasFast(){
	SQLAccèsDonnésDAO accèsDonnées = new SQLAccèsDonnésDAO();
	String idCompte = "1230948";
	DonnesBDD donnéesFichier = accèsDonnées.récupérerDonnées(idCompte);
	AgrégateurDeDonnées agrégateur = new AgrégateurDeDonnées();

	Compte compte = agrégateur.traiterDonnées(donnéesFichier);

	System.out.println(compte.getTitulaire());
}
						</code></pre>
						<pre><code data-trim contenteditable class="java">
@Test
public void ceciEstUnTestFast(){
	String idCompte = "1230948";
	DonnesBDD données = unJeuDeDonneesUtileACeTest(idCompte);
	AgrégateurDeDonnées agrégateur = new AgrégateurDeDonnées();

	Compte compte = agrégateur.traiterDonnées(données);

	assertThat(compte.getTitulaire()).isEqualTo("Harry Cover");
}

private DonnesBDD unJeuDeDonneesUtileACeTest(String idCompte) {
	DonnesBDD données = new DonnesBDD(idCompte);
	données.setNom("Cover");
	données.setPrenom("Harry");
	return données;
}
						</code></pre>
					</section>

					<section>
						<h3>Indépendant</h3>
						<pre><code data-trim contenteditable class="java">
@Test
public void ceciEstUnTestQuiNEstPasIndependant(){
	Compte compte = new Compte();

	compte.ajouter(1000);

	assertThat(compte.getSolde()).isEqualTo(1500);

	compte.setCotitulaire("John Doe");

	assertThat(compte.aUnCotitulaire()).isTrue();
}
						</code></pre>
						<pre><code data-trim contenteditable class="java">
@Test
public void ceciEstUnTestIndependantSurLeSolde() {
	Compte compte = new Compte();
        
	compte.ajouter(1000);
        
	assertThat(compte.getSolde()).isEqualTo(1500);
}
@Test 
public void ceciEstUnTestIndependantSurLeCotitulaire(){
	Compte compte = new Compte();
        
	compte.setCotitulaire("John Doe");
        
	assertThat(compte.aUnCotitulaire()).isTrue();
}						
						</code></pre>
					</section>

					<section>
						<h3>Répétable</h3>
						<pre><code data-trim contenteditable class="java">							
@Test
public void ceciEstUnTestNonRépétable(){
   Compte compte = new Compte();

   compte.setDateOuverture(new Date());

   assertThat(compte.getDateOuverture()).isEqualTo(new Date());
}
						</code></pre>
						<pre><code data-trim contenteditable class="java">
@Test
public void ceciEstUnTestRépétable(){ 
   String format = "yyyy-MM-dd";  
   String date = "2015-01-25";
   Compte compte = new Compte();
   
   compte.setDateOuverture(DateTime.parse(date));

   assertThat(compte.getDateOuverture().toString(format)).isEqualTo(date);
}				
						</code></pre>
					</section>

					<section>
						<h3>Auto-Validant</h3>
						<pre><code data-trim contenteditable class="java">
@Test
public void ceciEstUnTestQuiNEstPasAutoValidant(){
	SQLAccèsDonnésDAO accèsDonnées = new SQLAccèsDonnésDAO();
	String idCompte = "1230948";
	DonnesBDD donnéesFichier = accèsDonnées.récupérerDonnées(idCompte);
	AgrégateurDeDonnées agrégateur = new AgrégateurDeDonnées();

	Compte compte = agrégateur.traiterDonnées(donnéesFichier);

	System.out.println(compte.getTitulaire());
}
						</code></pre>
						<pre><code data-trim contenteditable class="java">
@Test
public void ceciEstUnTestAutoValidant(){
	String idCompte = "1230948";
	DonnesBDD données = unJeuDeDonneesUtileACeTest(idCompte);
	AgrégateurDeDonnées agrégateur = new AgrégateurDeDonnées();

	Compte compte = agrégateur.traiterDonnées(données);

	assertThat(compte.getTitulaire()).isEqualTo("Harry Cover");}

private DonnesBDD unJeuDeDonneesUtileACeTest(String idCompte) {
	DonnesBDD données = new DonnesBDD(idCompte);
	données.setNom("Cover");
	données.setPrenom("Harry");
	return données;
}
						</code></pre>
					</section>

					<section>
						<h3>Opportun</h3>
						<p>
							Les tests doivent être écrits juste avant le code de production qui les fait passer. <br>
							Autrement, vous trouverez que le code sera difficile à tester et que vous perdez votre temps. <br>
						</p>
					</section>
				</section>

				<section>
					<h2>Le TDD ?</h2>
					<p>Une discipline qui permet de faire émerger le design et l'implémentation du code en utilisant les tests unitaires.</p>
					<p>
						<a href="http://programmer.97things.oreilly.com/wiki/index.php/The_Three_Laws_of_Test-Driven_Development">Il y a 3 règles simples :</a>
					</p>
				</section>
				
				<section>
					<blockquote cite="http://programmer.97things.oreilly.com/wiki/index.php/The_Three_Laws_of_Test-Driven_Development">
						&ldquo;Ne pas écrire de code de production si ce n'est pour faire passer un test qui échoue.&rdquo;
					</blockquote>
				</section>
				
				<section>
					<blockquote cite="http://programmer.97things.oreilly.com/wiki/index.php/The_Three_Laws_of_Test-Driven_Development">
						&ldquo;Ne pas écrire plus de ligne de test qu'il ne faut pour échouer. Ne pas compiler est échouer.&rdquo;
					</blockquote>
				</section>
				
				<section>
					<blockquote cite="http://programmer.97things.oreilly.com/wiki/index.php/The_Three_Laws_of_Test-Driven_Development">
						&ldquo;Ne pas écrire plus de code de production qu'il ne faut pour faire passer avec succès le test.&rdquo;
					</blockquote>
				</section>

				<section>
					<p align="center">
						Le Mantra du TDD <br>
						<img src="./images/red_green_refactor.jpg" alt="Red => Green => Refacto">
					</p>
				</section>

				<section>
					<p>Le Refactoring, étape obligatoire :</p>
					<br>
					<blockquote>
						Le refactoring, est l'art de modifier la structure du code sans en altérer le fonctionnement.
					</blockquote>
					<br>
					<p> Commencer par éliminer les duplications !</p>
				</section>
				
				<section>
					<p>Et maintenant ?</p>
					<img src="./images/noidea.jpg" alt="Et maintenant ?">
					<p>Un peut de code !</p>
				</section>	

				<section>
					<p>Le grand classique du TDD : Le FizzBuzz</p>
					<br>
					<p>
						Écrire un programme qui afficher les entiers de 0 à 100. <br>
						Pour les multiple de 3 remplacer le nombre par fizz. <br>
						Pour les multiple de 5 remplacer le nombre par buzz. <br>
						Pour les multiple de 3 et 5 remplacer le nombre par fizzbuzz.
					</p>
				</section>

				<section>
					<p>
						Pour aller plus loin ? <br>
						Pourquoi ne pas mettre en place un coding dojo ?
					</p>
				</section>	

				<section>
					<h3>Ressources</h3>
					<ul>
						<li><a href="http://www.jamesshore.com/Agile-Book/test_driven_development.html">Le TDD en détail par James Shore</a></li>
						<li><a href="http://www.jamesshore.com/Agile-Book/refactoring.html">Le refactoring par James Shore</a></li>
						<li><a href="https://groups.yahoo.com/neo/groups/extremeprogramming/conversations/topics/111829">Bonnes pratiques de test unitaire par Michael Feathers</a></li>
						<li><a href="http://blog.cleancoder.com/">Robert C. Martin (Uncle Bob) - The Clean Bode blog</a></li>
						<li><a href="http://c2.com/cgi/wiki?ArrangeActAssert">Test unitaire: Le pattern Arrange-Act-Assert</a></li>
						<li>TDD by example de Kent Beck. ISBN: 978-0-321-14653-3</li>
					</ul>
				</section>	

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
