<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>TDD - Test Driven Development</title>

		<meta name="description" content="Présentation du TDD en prélude à la mise en place de Coding Dojo">
		<meta name="author" content="Jean-François Le Foll">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h2>TDD - Test Driven Development</h2>
					<p>
						<small> <a href="http://jefflefoll.github.io">Jean-François Le Foll</a> / <a href="http://twitter.com/JeffLeFoll">@JeffLeFoll</a></small>
					</p>
				</section>

				<section>
					<section>
						<h2>Définition d'un bon test unitaire (James Shore)</h2>
						<p class="fragment">S’exécute rapidement</p>
						<p class="fragment">Fournis une ceinture de sécurité pour le refactoring</p>
						<p class="fragment">Documente le but du code (c'est une spec)</p>
						<p class="fragment">Alerte l'équipe des régressions</p>
					</section>
				</section>

				<section>
					<section>
						<h2>Une règle à suivre : F.I.R.S.T</h2>
						<ul>
							<li>Fast</li>
							<li>Independant</li>
							<li>Repeatable</li>
							<li>Self-validating</li>
							<li>Timely</li>
						</ul>
					</section>

					<section>
						<h3>Rapide</h3>
						<pre><code data-trim contenteditable class="java">
public class AgrégateurDeDonnéesTest {
    @Test
    public void ceciEstUnTestQuiNEstPasFast(){
        SQLAccèsDonnésDAO accèsDonnées = new SQLAccèsDonnésDAO();
        String idCompte = "1230948";
        DonnesBDD donnéesFichier = accèsDonnées.récupérerDonnées(idCompte);
        AgrégateurDeDonnées agrégateur = new AgrégateurDeDonnées();
        Compte compte = agrégateur.traiterDonnées(donnéesFichier);
        System.out.println(compte.getTitulaire());
    }
}
						</code></pre>
						<pre><code data-trim contenteditable class="java">
public class AgrégateurDeDonnéesTest {
    @Test
    public void ceciEstUnTestFast(){
        String idCompte = "1230948";
        DonnesBDD données = unJeuDeDonneesUtileACeTest(idCompte);

        AgrégateurDeDonnées agrégateur = new AgrégateurDeDonnées();
        Compte compte = agrégateur.traiterDonnées(données);

        assertThat(compte.getTitulaire()).isEqualTo("Harry Cover");
    }

    private DonnesBDD unJeuDeDonneesUtileACeTest(String idCompte) {
        DonnesBDD données = new DonnesBDD(idCompte);
        données.setNom("Cover");
        données.setPrenom("Harry");
        return données;
    }
}
						</code></pre>
					</section>

					<section>
						<h3>Indépendant</h3>
						<pre><code data-trim contenteditable class="java">
public class CompteTest {
    @Test
    public void ceciEstUnTestQuiNEstPasIndependant(){
        Compte compte = new Compte();
        compte.ajouter(1000);
        assertThat(compte.getSolde()).isEqualTo(1500);

        compte.setCotitulaire("John Doe");
        assertThat(compte.aUnCotitulaire()).isTrue();
    }
}
						</code></pre>
						<pre><code data-trim contenteditable class="java">
 public class CompteTest {
    @Test
    public void ceciEstUnTestIndependantSurLeSolde() {
        Compte compte = new Compte();
        
        compte.ajouter(1000);
        
        assertThat(compte.getSolde()).isEqualTo(1500);
    }
    @Test 
    public void ceciEstUnTestIndependantSurLeCotitulaire(){
        Compte compte = new Compte();
        
        compte.setCotitulaire("John Doe");
        
        assertThat(compte.aUnCotitulaire()).isTrue();
    }					
}		
						</code></pre>
					</section>

					<section>
						<h3>Répétable</h3>
						<pre><code data-trim contenteditable class="java">
public class CompteTest {							
    @Test
    public void ceciEstUnTestNonRépétable(){
      Compte compte = new Compte();
      compte.setDateOuverture(new Date());

      assertThat(compte.getDateOuverture()).isEqualTo(new Date());
    }
}
						</code></pre>
						<pre><code data-trim contenteditable class="java">
 public class CompteTest {
    @Test
    public void ceciEstUnTestRépétable(){
      String format = "dd/MM/yyyy";
      String date = "25/01/2015";
      DateTimeFormatter formateur = DateTimeFormat.forPattern(format);

      Compte compte = new Compte();
      compte.setDateOuverture(DateTime.parse(date, formateur));

      assertThat(compte.getDateOuverture().toString(format)).isEqualTo(date);
    }
}						
						</code></pre>
					</section>

					<section>
						<h3>Auto-Validant</h3>
						<pre><code data-trim contenteditable class="java">
public class AgrégateurDeDonnéesTest {
    @Test
    public void ceciEstUnTestQuiNEstPasAutoValidant(){
        SQLAccèsDonnésDAO accèsDonnées = new SQLAccèsDonnésDAO();
        String idCompte = "1230948";
        DonnesBDD donnéesFichier = accèsDonnées.récupérerDonnées(idCompte);
        AgrégateurDeDonnées agrégateur = new AgrégateurDeDonnées();
        Compte compte = agrégateur.traiterDonnées(donnéesFichier);
        System.out.println(compte.getTitulaire());
    }
}
						</code></pre>
						<pre><code data-trim contenteditable class="java">
public class AgrégateurDeDonnéesTest {
    @Test
    public void ceciEstUnTestAutoValidant(){
        String idCompte = "1230948";
        DonnesBDD données = unJeuDeDonneesUtileACeTest(idCompte);

        AgrégateurDeDonnées agrégateur = new AgrégateurDeDonnées();
        Compte compte = agrégateur.traiterDonnées(données);

        assertThat(compte.getTitulaire()).isEqualTo("Harry Cover");
    }

    private DonnesBDD unJeuDeDonneesUtileACeTest(String idCompte) {
        DonnesBDD données = new DonnesBDD(idCompte);
        données.setNom("Cover");
        données.setPrenom("Harry");
        return données;
    }
}
						</code></pre>
					</section>

					<section>
						<h3>Opportun</h3>
						<p>
							Les tests doivent être écrit juste avant le code de production qui les fait passer. </br>
							Autrement, vous trouverez que le code sera difficile à tester et que vous perdez votre temps. </br>
							Votre code ne sera pas conçut pour être testable. </br>
							De plus écrire les tests après le code est souvent moins fun, plus frustrant et moins productif que de les écrire juste avant.  </br>
						</p>
					</section>
				</section>

				<section>
					<p>
						Des tests écrit avant le code de production sont des <b><u>Spécifications par l’exemple</u></b> car ils doivent tester le comportement du code et non pas sont implémentation. </br></br>
						Ils vont permettre à tous le monde de comprendre rapidement le but du code. </br></br>
						Les tests sont tout aussi important que le code de production car ils en assurent sa flexibilité, sa maintenabilité et sa réutilisabilité. </br>
					</p>
					</br>
				</section>

				<section>
					<h2>Le TDD ?</h2>
					<p>
						Une discipline qui permet de faire émerger le design et l'implémentation du code en utilisant les tests unitaires. </br>
						Il y a 3 règles simples :
					</p>
					<blockquote cite="http://programmer.97things.oreilly.com/wiki/index.php/The_Three_Laws_of_Test-Driven_Development">
						&ldquo;Vous ne pouvez pas écrire de code de production sans avoir d'abord écrit un test unitaire en échec.&rdquo; </br>
					</blockquote>
					<blockquote cite="http://programmer.97things.oreilly.com/wiki/index.php/The_Three_Laws_of_Test-Driven_Development">
						&ldquo;Vous ne pouvez pas écrire plus de ligne de test qu'il ne faut pour échouer. Ne pas compiler est échouer.&rdquo; </br>
					</blockquote>
					<blockquote cite="http://programmer.97things.oreilly.com/wiki/index.php/The_Three_Laws_of_Test-Driven_Development">
						&ldquo;Vous ne pouvez pas écrire plus de code de production qu'il ne faut pour faire passer avec succes le test.&rdquo; </br>
					</blockquote>
					<a href="http://programmer.97things.oreilly.com/wiki/index.php/The_Three_Laws_of_Test-Driven_Development">Les 3 lois du TDD.</a>
				</section>

				<section>
					<p align="center">
						Et avec un peut de hauteur ? </br>
						<img src="./images/red_green_refactor.jpg" alt="Red => Green => Refacto">
						<p align="left">
							1) Écrire un test en échec </br>
							2) Écrire le code de production qui le fait passer </br>
							3) Nettoyer le bordel que l'on viens de faire :) </br>
						</p>
					</p>

				</section>

				<section>
						<blockquote>
							Make it work. Make it right. Make it fast.
						</blockquote>
						 <i> Kent Beck </i>
				</section>

					
				<section>
					<section>
						<h3>Make it work</h3>
						<p>Le test</p>
						<pre><code data-trim contenteditable class="java">
public class DateUtilitaireTest {
    @Test
    public void doitDeterminerLeDernierJourDuMois(){
    	// Arrange
        String dateCourente = "2015-02-13";

        // Act
        String résultat = DateUtilitaire.dernierJourDuMois(dateCourente);

        // Assert
        assertThat(résultat).isEqualTo("2015-02-28");
    }
}
						</code></pre>
					</section>
					<section>
						<p>L'implémentation</p>
						<pre><code data-trim contenteditable class="java">
public class DateUtilitaire {

    public static String dernierJourDuMois(String dateCourente) {
        return "2015-02-28";
    }
}
						</code></pre>
					</section>
				</section>

				<section>
					<section>
						<h3>Make it right</h3>
						<p>L'implémentation</p>
						<pre><code data-trim contenteditable class="java">
public class DateUtilitaire {
    public static String dernierJourDuMois(String dateCourente) {
        DateTime date = DateTime.parse(dateCourente);

        DateTime dernierJourDuMois = date.dayOfMonth().withMaximumValue();

        return dernierJourDuMois.toString("yyyy-MM-dd");
    }
}
						</code></pre>
					</section>
				</section>
				
				<section>
					<img src="./images/question-chat.jpg" alt="Des Questions ?">
				</section>	

				<section>
					<p>Et maintenant ?</p>
					<img src="./images/noidea.jpg" alt="Et maintenant ?">
					<p>Ouverture du Coding Dojo !</p>
				</section>	

				<section>
					<h3>Ressources</h3>
					<ul>
						<li><a href="http://www.jamesshore.com/Agile-Book/test_driven_development.html">Le TDD en détail par James Shore</a></li>
						<li><a href="https://groups.yahoo.com/neo/groups/extremeprogramming/conversations/topics/111829">Bonnes pratiques de test unitaire par Michael Feathers</a></li>
						<li><a href="http://blog.cleancoder.com/">Robert C. Martin (Uncle Bob) - The Clean Bode blog</a></li>
						<li><a href="http://c2.com/cgi/wiki?ArrangeActAssert">Pattern Arrange-Act-Assert</a></li>
					</ul>
				</section>	

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
